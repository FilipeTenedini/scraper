import puppeteer from 'puppeteer';
import { run } from './functions/getFiiPage.js';

async function init(){
    const browser = await puppeteer.launch(); //abrir a instancia do browser
    const page = await browser.newPage(); //abrimos uma nova página
    await page.goto('https://www.olx.com.br/estado-rs?q=honda%20city'); // pegamos a página e navegamos até o site desejado.

    const data = await page.evaluate(() => {
        const products = []
        document.querySelectorAll(".sc-12rk7z2-0").forEach((item) => {
            const title = item.querySelector('h2').innerText;
            const price = item.querySelector('span.m7nrfa-0.eJCbzj.sc-ifAKCX.jViSDP').innerText;
            products.push({
                title,
                price
            });

        });
        return {
            products
        }
    });


    console.log(data.products)
    console.log(data.products.length)
    await browser.close();
}

init();